#!/bin/bash
#
# KNAF itself
#
# (C) 2015 Mike Baehr
#
# This is free software: see COPYING for terms/conditions

export PATH="${PWD}/bin:${PATH}"
export PROMISES="${PWD}/promises/"
export FACTS="${PWD}/facts/"
export DECISIONS="${PWD}/decisions/"

function knaf() {
  action="$1"
  addendum="$2"
  case "${action}" in
    verify|enforce)
      facter \
      | decider \
      | dispatcher "${action}" "${addendum}" \
      | sh
      ;;
    *)
      return 1
      ;;
  esac
}
